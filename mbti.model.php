<?php
/**
 * @class  mbtiModel
 * @author 
 * @brief  mbti module model class
 */
class mbtiModel extends mbti
{
    /**
     * @brief Initialization
     */
    public function init()
    {
    }

    /**
     * @brief Return the official 40-question MBTI set
     */
    public function getQuestions()
    {
        // Total 40 questions (10 per dichotomy) to ensure high reliability.
        // Option A and Option B map to specific traits.
        return [
            // E vs I
            ['id' => 'ei_1', 'type' => 'EI', 'q' => '주말에 약속이 잡혔어! 당신이 선호하는 모임의 형태는?', 'a' => ['text' => '친한 친구 한두 명만 조용히 만나서 이야기하는 게 최고지.', 'value' => 'I'], 'b' => ['text' => '많은 친구들이 모여 스트레스를 날리는 즐거운 모임!', 'value' => 'E']],
            ['id' => 'ei_2', 'type' => 'EI', 'q' => '나를 포함해 3~4명이 모인 술자리, 처음 보는 친구의 친구가 합석했다.', 'a' => ['text' => '모임 내내 주로 듣는 편이며, 내게 질문이 올 때까지 말을 아끼고 관찰한다.', 'value' => 'I'], 'b' => ['text' => '"오 안녕하세요! 어떤 일 하세요?" 가벼운 스몰토크로 어색함을 풀고 대화에 참여한다.', 'value' => 'E']],
            ['id' => 'ei_3', 'type' => 'EI', 'q' => '회사(학교)에서 개박살나고 멘탈이 나간 날, 당신의 힐링법은?', 'a' => ['text' => '친구들과 술 한잔하면서 뒷담화로 스트레스 날리기.', 'value' => 'E'], 'b' => ['text' => '불 끄고 침대에 누워서 혼자 넷플릭스 정주행하며 잠수 타기.', 'value' => 'I']],
            ['id' => 'ei_4', 'type' => 'EI', 'q' => '친구가 내 카톡을 3시간째 안읽씹 한다. 당신의 반응은?', 'a' => ['text' => '"바쁜 일 있나 보네" 하고 크게 신경 안 쓰고 내 할 일 한다.', 'value' => 'I'], 'b' => ['text' => '"뭐해? 바빠? 왜 안읽어?" 바로 전화나 추가 카톡을 날린다.', 'value' => 'E']],
            ['id' => 'ei_5', 'type' => 'EI', 'q' => '길거리에서 애매하게 친한 사람을 발견했다! 당신은?', 'a' => ['text' => '날 못 봤기를 바라며 급하게 스마트폰을 보는 척하며 지나친다.', 'value' => 'I'], 'b' => ['text' => '"오! 오랜만이다!" 먼저 다가가서 스몰토크 시전.', 'value' => 'E']],
            ['id' => 'ei_6', 'type' => 'EI', 'q' => '처음 만나는 사람들과의 조별 과제 첫 회의록 작성 시간!', 'a' => ['text' => '누군가 입을 열 때까지 조용히 분위기를 파악하며 침묵을 유지한다.', 'value' => 'I'], 'b' => ['text' => '어색한 정적을 견딜 수 없어 "자기소개 먼저 할까요?" 나선다.', 'value' => 'E']],
            ['id' => 'ei_7', 'type' => 'EI', 'q' => '평일 저녁 퇴근 후, 나의 이상적인 스케줄은?', 'a' => ['text' => '아무도 안 만나고 일찍 집에 가서 편한 옷으로 갈아입은 뒤 나만의 시간을 갖는 것.', 'value' => 'I'], 'b' => ['text' => '약속을 잡아 동료나 친구들을 만나 맛있는 걸 먹으며 수다로 스트레스를 푸는 것.', 'value' => 'E']],
            ['id' => 'ei_8', 'type' => 'EI', 'q' => '핸드폰 배터리가 10% 남았다. 충전기도 없다!', 'a' => ['text' => '어차피 올 연락도 딱히 없고, 꺼지면 꺼지나 보다 평온하게 받아들인다.', 'value' => 'I'], 'b' => ['text' => '누가 연락 오면 어떡해! 세상과 단절된 느낌에 극도로 불안해진다.', 'value' => 'E']],
            ['id' => 'ei_9', 'type' => 'EI', 'q' => '나에게 복잡하고 힘든 고민거리가 생겼을 때, 나는 주로 어떻게 해결할까?', 'a' => ['text' => '일단 친한 사람들에게 털어놓으며 말을 하다 보면 생각과 감정이 자연스레 정리된다.', 'value' => 'E'], 'b' => ['text' => '내 안에서 충분히 생각하고 스스로 감정을 정리한 뒤에, 비로소 남에게 이야기할 수 있다.', 'value' => 'I']],
            ['id' => 'ei_10', 'type' => 'EI', 'q' => '카페에서 평소 좋아하던 음악이 흘러나왔다. 내적 흥분 상태인 당신의 반응은?', 'a' => ['text' => '혼자서 조용히 리듬만 타거나 음악 앱으로 플레이리스트에 조용히 저장한다.', 'value' => 'I'], 'b' => ['text' => '같이 온 친구에게 "이 노래 진짜 좋지 않아요?" 하며 공감을 유도하고 따라 부른다.', 'value' => 'E']],
            ['id' => 'ei_11', 'type' => 'EI', 'q' => '오랜만에 떠나는 휴가! 당신이 원하는 여행지 스타일은?', 'a' => ['text' => '인적 드문 한적한 자연 구경이나 아늑하고 조용한 프라이빗 숙소.', 'value' => 'I'], 'b' => ['text' => '사람 많고 북적이는 핫플레이스나 밤새 노는 클럽 파티!', 'value' => 'E']],
            ['id' => 'ei_12', 'type' => 'EI', 'q' => '어려운 일을 해내서 큰 칭찬을 들었다. 당신의 마음속은?', 'a' => ['text' => '주목받는게 부끄러워 태연한 척 "감사합니다" 하고 속으로만 좋아하고만다.', 'value' => 'I'], 'b' => ['text' => '카톡, 인스타에 올리고 주변사람들과 기쁨을 나누고싶다.', 'value' => 'E']],
            ['id' => 'ei_13', 'type' => 'EI', 'q' => '아무 일정 없는 꿀 같은 주말! 나를 가장 충전시켜주는 휴식의 형태는?', 'a' => ['text' => '밀린 예능이나 영화를 켜놓고, 맛있는 배달 음식을 시켜 먹으며 푹신한 침대와 한 몸이 되는 것!', 'value' => 'I'], 'b' => ['text' => '드라이브를 가든, 전시회를 가든, 핫플을 가든 일단 집 밖으로 나가서 새로운 공기를 마시는 것!', 'value' => 'E']],
            ['id' => 'ei_14', 'type' => 'EI', 'q' => '스스로 너무 처량하고 슬픈 일이 생겼을 때 어떻게 이겨내나?', 'a' => ['text' => '불 끄고 조용히 슬픈 노래 들으며 혼자 펑펑 운다.', 'value' => 'I'], 'b' => ['text' => '제일 친한 친구에게 전화해서 위로를 받는다.', 'value' => 'E']],
            ['id' => 'ei_15', 'type' => 'EI', 'q' => '회사 전체 회식 자리, 당신의 움직임은?', 'a' => ['text' => '내 앞에 세팅된 그 자리에서, 조용히 고기 굽고 주는 술만 받는다.', 'value' => 'I'], 'b' => ['text' => '테이블 옮겨다니며 사람들과 이야기하면서 짠!', 'value' => 'E']],

            // S vs N
            ['id' => 'sn_1', 'type' => 'SN', 'q' => '최애 가수의 신곡을 들을 때 가장 먼저 꽂히는 부분은?', 'a' => ['text' => '가사에 이런 숨은 의미가...? 곡 전체에 담긴 서사와 감성에 과몰입함.', 'value' => 'N'], 'b' => ['text' => '비트 좋고 멜로디 짱! 보컬 음색이랑 도입부가 귀에 쏙 들어오네.', 'value' => 'S']],
            ['id' => 'sn_2', 'type' => 'SN', 'q' => '집에서 혼자 파스타 요리를 시도한다!', 'a' => ['text' => '유튜브 레시피 그대로 종이컵 계량부터 끓이는 시간 8분까지 정확히 지킨다.', 'value' => 'S'], 'b' => ['text' => '"이 소스 넣으면 맛있겠지? 마늘은 다다익선!" 눈대중과 직감으로 퓨전 요리 창조.', 'value' => 'N']],
            ['id' => 'sn_3', 'type' => 'SN', 'q' => '지하철에서 멍 때리고 있을 때 당신의 머릿속은?', 'a' => ['text' => '"갑자기 지진 나서 기차가 멈추면 여길 어떻게 탈출하지?" 등 망상 폭발', 'value' => 'N'], 'b' => ['text' => '"앞사람 신발 예쁘다", "이번 역에서 내려 환승해야지" 등 눈앞의 현실', 'value' => 'S']],
            ['id' => 'sn_4', 'type' => 'SN', 'q' => '길치인 친구에게 길을 설명해 줄 때 나는?', 'a' => ['text' => '"스타벅스 나오면 우회전해서 100미터 직진 후 노란 간판 2층이야"', 'value' => 'S'], 'b' => ['text' => '"그쪽 역에서 쭉 올라오다 보면 대충 느낌 오는 고기 골목이 있어"', 'value' => 'N']],
            ['id' => 'sn_5', 'type' => 'SN', 'q' => '친구가 "나 어제 똥 밟았어ㅠㅠ" 라고 한다면?', 'a' => ['text' => '"헐 어디서? 냄새~ 신발 어떡해?" (사실 확인)', 'value' => 'S'], 'b' => ['text' => '"오 대박! 복권 사자 복권! 길조 아니야?" (상징 부여)', 'value' => 'N']],
            ['id' => 'sn_6', 'type' => 'SN', 'q' => '물건을 살 때 당신을 지갑 열게 하는 문구는?', 'a' => ['text' => '"시대를 초월한 디자인, 당신의 가치를 높여주는 단 하나의 럭셔리"', 'value' => 'N'], 'b' => ['text' => '"최저가 보장! 실용성 갑! 다용도 활용 가능"', 'value' => 'S']],
            ['id' => 'sn_7', 'type' => 'SN', 'q' => '새로운 게임에 접속했다. 어떻게 시작할까?', 'a' => ['text' => '튜토리얼 스킵! 일단 막 눌러보면서 맞고 죽으면서 배운다.', 'value' => 'N'], 'b' => ['text' => '조작법, 아이템 설명 등 튜토리얼을 꼼꼼히 확인하고 시작한다.', 'value' => 'S']],
            ['id' => 'sn_8', 'type' => 'SN', 'q' => '기말고사 공부를 해야 한다. 책을 펴면?', 'a' => ['text' => '1페이지부터 형광펜 칠하며 세부적인 내용을 꼼꼼히 암기한다.', 'value' => 'S'], 'b' => ['text' => '목차부터 훑으며 핵심 개념의 흐름과 전체적인 맥락을 먼저 이해한다.', 'value' => 'N']],
            ['id' => 'sn_9', 'type' => 'SN', 'q' => '"미래"라는 단어를 들으면 드는 생각은?', 'a' => ['text' => '"당장 내 집 마련은 언제 하지? 퇴직금은 얼마나 모일까?" (현실적 대비)', 'value' => 'S'], 'b' => ['text' => '"10년 뒤 난 AI와 함께 우주 여행을 갈지도 몰라!" (이상적 기대)', 'value' => 'N']],
            ['id' => 'sn_10', 'type' => 'SN', 'q' => '상사에게 지시받을 때 편한 스타일은?', 'a' => ['text' => 'A 방식대로 B 형식 맞춰서 언제까지 해오라는 명확한 가이드라인.', 'value' => 'S'], 'b' => ['text' => '"핵심 목표는 이거니까 자네 스타일대로 자유롭게 구상해 봐" 라는 재량권.', 'value' => 'N']],
            ['id' => 'sn_11', 'type' => 'SN', 'q' => '넷플릭스 범죄 다큐멘터리를 볼 때 집중하는 포인트는?', 'a' => ['text' => '범인의 심리적 동기, 사회 구조 문제 등 이면에 숨겨진 의미.', 'value' => 'N'], 'b' => ['text' => '범행 수법, 시간대, 증거물 등 사건의 팩트와 디테일.', 'value' => 'S']],
            ['id' => 'sn_12', 'type' => 'SN', 'q' => '최근에 너무 재밌게 본 영화를 친구에게 열정적으로 추천한다면?', 'a' => ['text' => '"인간의 본성과 욕망에 대해 엄청 생각하게 만드는 영화야. 다 보고 나면 여운이 쩔어..."', 'value' => 'N'], 'b' => ['text' => '"거기서 주인공이 폐공장에서 악당이랑 싸우는 액션 씬이 진짜 미쳤어! CG 파티야!"', 'value' => 'S']],
            ['id' => 'sn_13', 'type' => 'SN', 'q' => '"사과"하면 가장 먼저 떠오르는 것은?', 'a' => ['text' => '빨갛다, 둥글다, 아삭아삭하다, 맛있다.', 'value' => 'S'], 'b' => ['text' => '백설공주, 스티브 잡스, 뉴턴의 만유인력.', 'value' => 'N']],
            ['id' => 'sn_14', 'type' => 'SN', 'q' => '새로운 전자기기를 샀거나 조립식 가구를 샀다. 당신의 행동은?', 'a' => ['text' => '설명서는 대충 훑어보거나 넘기고, 대강 어떻게 하면 될지 직감으로 때려 맞춰보며 시도한다.', 'value' => 'N'], 'b' => ['text' => '부품 개수가 맞는지부터 확인하고, 설명서의 1번부터 순서대로 아주 꼼꼼하게 따라 한다.', 'value' => 'S']],
            ['id' => 'sn_15', 'type' => 'SN', 'q' => '친구가 "나 내일부터 다이어트 할 거야!" 라고 선언하면?', 'a' => ['text' => '"너의 새로운 다짐을 응원해! 바디프로필까지 고고싱!"', 'value' => 'N'], 'b' => ['text' => '"오 운동 뭐하게? 헬스 끊었어? 식단은 어떻게 짤 건데?"', 'value' => 'S']],

            // T vs F
            ['id' => 'tf_1', 'type' => 'TF', 'q' => '친구가 "나 차 사고 났어ㅠㅠ" 카톡을 보냈다.', 'a' => ['text' => '"헐 어떡해? 과실 비율은 어떻게 된대? 보험사 불렀어?" 해결책 먼저', 'value' => 'T'], 'b' => ['text' => '"미쳤다!! 안 다쳤어?? 몸은 괜찮아?? 많이 놀랐겠다ㅠㅠ" 걱정 먼저', 'value' => 'F']],
            ['id' => 'tf_2', 'type' => 'TF', 'q' => '친구가 남친이랑 헤어질까 고민이라며 하소연을 2시간째 한다.', 'a' => ['text' => '"진짜 쓰레기다 어떻게 그럴 수 있어? 네가 너무 아깝다 헤어져!" (무한 편들기)', 'value' => 'F'], 'b' => ['text' => '"가만 들어보니까 네 남친이 잘못한 것도 있지만 너도 이 부분은 좀..." (객관적 분석)', 'value' => 'T']],
            ['id' => 'tf_3', 'type' => 'TF', 'q' => '직장에서 낮은 고과 평가를 받았을 때', 'a' => ['text' => '"내 실적이 어떤 기준에서 부족했지?" 객관적인 원인을 찾고 개선하려 함', 'value' => 'T'], 'b' => ['text' => '"팀장님이 나 싫어하나... 진짜 서운하다" 상처받고 의연해지기 힘듦', 'value' => 'F']],
            ['id' => 'tf_4', 'type' => 'TF', 'q' => '"너 오늘 옷 스타일 좀 별로다" 돌직구를 맞았다.', 'a' => ['text' => '"그런가? 어디가 별로야? 색깔 매치가 안 맞나?" (이유가 궁금함)', 'value' => 'T'], 'b' => ['text' => '(겉으론 웃지만 속으로 개상처받음) "말을 굳이 왜 저렇게 밉게 하지?"', 'value' => 'F']],
            ['id' => 'tf_5', 'type' => 'TF', 'q' => '연인이 나를 위해 야심 차게 요리를 해줬다. 그런데 시식이 불가능할 정도로 간이 안 맞을 때 나의 반응은?', 'a' => ['text' => '"진짜 고생했어! 근데 소금 조금만 덜 넣으면 다음에 진짜 완벽할 거 같아!"', 'value' => 'T'], 'b' => ['text' => '"우와! 나 주려고 이걸 직접 한 거야? 진짜 감동이야, 너무 고마워 ㅠㅠ"', 'value' => 'F']],
            ['id' => 'tf_6', 'type' => 'TF', 'q' => '동료가 당신에게 "진짜 착하시네요"라고 한다면?', 'a' => ['text' => '(이유는 모르겠지만 칭찬은 춤추게 한다) "감사합니다! 대리님도 진짜 좋으세요!"', 'value' => 'F'], 'b' => ['text' => '(내가 무슨 이득 되는 행동을 해줬지?) "어떤 이유로 착하다고 하시는 거죠?"', 'value' => 'T']],
            ['id' => 'tf_7', 'type' => 'TF', 'q' => '친구와 대판 싸우고 화해의 대화를 시도한다.', 'a' => ['text' => '"네가 아까 A라고 말한 건 잘못이지만 나도 B를 한 건 미안해" 명확한 팩트 정리', 'value' => 'T'], 'b' => ['text' => '"아까 내가 너무 예민해서 짜증 내서 미안해. 네 마음 상하게 하고 싶지 않아"', 'value' => 'F']],
            ['id' => 'tf_8', 'type' => 'TF', 'q' => '슬픈 영화를 볼 때 당신의 눈물 버튼은?', 'a' => ['text' => '개연성 몰라도 일단 슬픈 브금 깔리고 배우가 처절하게 오열하면 자동 반사', 'value' => 'F'], 'b' => ['text' => '서사의 개연성이 완벽해서 주인공이 저럴 수밖에 없는 상황이 논리적으로 납득될 때', 'value' => 'T']],
            ['id' => 'tf_9', 'type' => 'TF', 'q' => '진짜 고민이 있어서 친구에게 조언을 구한다면 어떤 대답이 좋나?', 'a' => ['text' => '뼈가 부서져도 좋으니 상황을 돌파할 치명적이고 명확한 팩트 폭행 가이드', 'value' => 'T'], 'b' => ['text' => '해결은 내가 할 테니, 기죽지 않게 따뜻한 응원과 공감으로 자존감 채워주기', 'value' => 'F']],
            ['id' => 'tf_10', 'type' => 'TF', 'q' => '친구가 "나 우울해서 화분 샀어" 라고 한다.', 'a' => ['text' => '"무슨 일 있어? 왜 우울해 ㅠㅠ 화분 보면서 기분 좀 풀려?" (감정 확인)', 'value' => 'F'], 'b' => ['text' => '"엥? 무슨 화분 샀는데? 갑자기 웬 화분?" (정보 요구)', 'value' => 'T']],
            ['id' => 'tf_11', 'type' => 'TF', 'q' => '밤샘 작업으로 팀 프로젝트를 성공적으로 마쳤다.', 'a' => ['text' => '"나의 기여도가 이 정도니까 다음 고과에는 확실히 반영되겠지" 현실적 성과 중시', 'value' => 'T'], 'b' => ['text' => '"다 같이 밤새며 고생한 우리 팀 진짜 의리 짱이다!" 인간적 유대감 벅차오름', 'value' => 'F']],
            ['id' => 'tf_12', 'type' => 'TF', 'q' => '배달 앱에 별점 5점 리뷰를 남길 때 당신의 문체는?', 'a' => ['text' => '"배달 30분 만에 옴. 양은 둘이 먹기 충분하고 고기 잡내 없음. 가성비 추천"', 'value' => 'T'], 'b' => ['text' => '"사장님 서비스 너무 감동이에요ㅠㅠ 번창하세요♥"', 'value' => 'F']],
            ['id' => 'tf_13', 'type' => 'TF', 'q' => '오랜 규칙을 어긴 사연 있는 직원을 어떻게 처벌할 것인가?', 'a' => ['text' => '규칙도 사람이 만든 건데, 이번 한 번은 사정을 봐주고 선처해야 한다.', 'value' => 'F'], 'b' => ['text' => '사연은 안타깝지만 형평성을 위해 규정대로 징계해야 후환이 없다.', 'value' => 'T']],
            ['id' => 'tf_14', 'type' => 'TF', 'q' => '애인이 "나 얼마만큼 사랑해?" 라고 묻는다면?', 'a' => ['text' => '"내 목숨보다 더! 하늘만큼 땅만큼 우주 다 합친 것보다 더!" (감정적 최대치)', 'value' => 'F'], 'b' => ['text' => '"왕복 2시간 거리인데 매주 널 보러 오고 너한테 이만큼 투자하잖아" (물리적 근거)', 'value' => 'T']],
            ['id' => 'tf_15', 'type' => 'TF', 'q' => '치열한 말싸움(논쟁)을 무사히 끝낸 후 드는 감정은?', 'a' => ['text' => '"서로 기분 안 상하게 잘 타협해서 다행이다" 관계 회복에 대한 안도감', 'value' => 'F'], 'b' => ['text' => '"내 완벽한 논리에 할 말 없어진 거 봤지? 찢었다" 짜릿한 승리감', 'value' => 'T']],

            // J vs P
            ['id' => 'jp_1', 'type' => 'JP', 'q' => '2박 3일 제주도 여행 계획을 짜보자!', 'a' => ['text' => '"비행기표랑 숙소 잡았으면 끝난 거 아냐? 가서 느낌 오는 데로 가자!"', 'value' => 'P'], 'b' => ['text' => '분 단위 스케줄, 플랜B 루트, 맛집 웨이팅 시간까지 엑셀로 완벽 세팅', 'value' => 'J']],
            ['id' => 'jp_2', 'type' => 'JP', 'q' => '내일까지 제출해야 하는 중요한 과제, 현재 당신은?', 'a' => ['text' => '이미 3일 전에 완성해 놓고 오타 검수 후 여유롭게 휴식 중', 'value' => 'J'], 'b' => ['text' => '가슴이 미친 듯이 뛰고 아드레날린이 분비되는 마감 1시간 전, 미친 듯이 타이핑 중', 'value' => 'P']],
            ['id' => 'jp_3', 'type' => 'JP', 'q' => '예약해 둔 인스타 감성 맛집이 임시 휴업이다!', 'a' => ['text' => '"헐 어쩔 수 없지 뭐. 옆에 저기 돈가스집 맛있어 보이는데 저기 갈까?" 타격 제로', 'value' => 'P'], 'b' => ['text' => '(동공 지진) "하 나 플랜B 안 짜왔는데 어떡하지?" 계획이 틀어져 스트레스 풀맥스', 'value' => 'J']],
            ['id' => 'jp_4', 'type' => 'JP', 'q' => '당신의 PC 바탕화면이나 핸드폰 앱 상태는?', 'a' => ['text' => '다운로드 폴더는 블랙홀이고 바탕화면은 꽉 찼지만 놀랍게도 난 어딨는지 다 찾음', 'value' => 'P'], 'b' => ['text' => '"문서_최종" 폴더링 완벽. 앱은 용도/색깔별로 각 잡혀 있음', 'value' => 'J']],
            ['id' => 'jp_5', 'type' => 'JP', 'q' => '새해 맞이 다이어리를 샀다!', 'a' => ['text' => '1월 첫째 주까지 예쁜 펜으로 빼곡하게 쓰다가 2월부터 백지 방치', 'value' => 'P'], 'b' => ['text' => '12월까지 중요한 기념일 미리 다 체크해 두고 매일 할 일 리스트 작성함', 'value' => 'J']],
            ['id' => 'jp_6', 'type' => 'JP', 'q' => '호텔 뷔페에 입장! 접시를 어떻게 채울 것인가?', 'a' => ['text' => '콜드 푸드(샐러드) -> 핫 푸드 -> 디저트 순서대로 계획적인 식사 코스', 'value' => 'J'], 'b' => ['text' => '초밥 옆에 피자, 그 위에 케이크! 일단 눈에 보이고 땡기는 거 다 쓸어 담기', 'value' => 'P']],
            ['id' => 'jp_7', 'type' => 'JP', 'q' => '카카오톡 메시지 알림이 쌓여있을 때', 'a' => ['text' => '빨간 숫자표시(뱃지)가 떠 있는 걸 참을 수 없어. 몽땅 클릭해서 지움', 'value' => 'J'], 'b' => ['text' => '알림 999+는 기본. 내가 읽고 싶을 때 한 번에 몰아서 답장함', 'value' => 'P']],
            ['id' => 'jp_8', 'type' => 'JP', 'q' => '친구들과 만나기로 한 약속 시간!', 'a' => ['text' => '최소 10분 전에는 도착해서 핸드폰 보며 친구들을 기다림', 'value' => 'J'], 'b' => ['text' => '정각에 침대에서 일어나며 "야 나 지금 출발! (이제 양말 신음)" 코리안 타임 패시브', 'value' => 'P']],
            ['id' => 'jp_9', 'type' => 'JP', 'q' => '새로운 신상 노트북을 사야 한다!', 'a' => ['text' => '예산 정하고 스펙 비교해서 제일 괜찮은 거 딱 골라서 바로 결제', 'value' => 'J'], 'b' => ['text' => '유튜브 리뷰 백 개 넘게 보고 "아 이거 살까 저거 살까" 장바구니에만 한 달 채 방치', 'value' => 'P']],
            ['id' => 'jp_10', 'type' => 'JP', 'q' => '배달의 민족에서 메뉴 고를 때', 'a' => ['text' => '"아 뭐 먹지" 무한 스크롤하다가 직관적으로 맛있어 보이는 사진 터치해서 주문', 'value' => 'P'], 'b' => ['text' => '미리 먹고 싶었던 메뉴 검색 -> 평점 최소 4.8 이상 -> 리뷰 스캔 후 주문', 'value' => 'J']],
            ['id' => 'jp_11', 'type' => 'JP', 'q' => '해외여행 짐을 싼다면?', 'a' => ['text' => '출발 3일 전부터 세면도구, 비상약 등 카테고리별로 체크리스트 지워가며 완벽 포장', 'value' => 'J'], 'b' => ['text' => '출발 전날 밤 "여권만 있으면 가지 뭐" 하며 눈에 보이는 옷 쑤셔 넣고 꿀잠', 'value' => 'P']],
            ['id' => 'jp_12', 'type' => 'JP', 'q' => '이번 주말의 휴일 계획은?', 'a' => ['text' => '토요일 오전 청소, 오후 2시 코스트코 장보기. 뚜렷한 일정이 있어야 안심', 'value' => 'J'], 'b' => ['text' => '늦잠 푹 자고 일어나서 넷플릭스 보다가 친구 부르면 씻고 나가는 즉흥 라이프', 'value' => 'P']],
            ['id' => 'jp_13', 'type' => 'JP', 'q' => '자취방에서 라면 끓여 먹을 때 그릇 처리 방식', 'a' => ['text' => '다 먹은 냄비는 싱크대 탑에 방치. 내일 먹을 그릇이 없을 때 한 방에 대청소함', 'value' => 'P'], 'b' => ['text' => '물 끓는 동안 주변 치우고, 먹자마자 바로 설거지해서 물기 쫙 빼놓음', 'value' => 'J']],
            ['id' => 'jp_14', 'type' => 'JP', 'q' => '일할 때 여러 가지 프로젝트가 주어진다면?', 'a' => ['text' => 'A끝내고 B시작, B끝내고 C시작. 한 가지에 집중해서 마무리 짓는 게 편함', 'value' => 'J'], 'b' => ['text' => 'A하다가 막히면 B하고 심심하면 C하고. 여러 개 전개하면서 유동적으로 처리', 'value' => 'P']],
            ['id' => 'jp_15', 'type' => 'JP', 'q' => '내 인생을 한 줄로 표현하자면?', 'a' => ['text' => '어차피 인생은 맘대로 안 된다. 흐르는 대로 유연하게 즐기는 인생', 'value' => 'P'], 'b' => ['text' => '계획 없는 삶은 불안하다. 목표를 세우고 통제하며 쟁취하는 인생', 'value' => 'J']]
        ];
    }

    /**
     * @brief Get MBTI Result info
     */
    public function getResult($result_srl)
    {
        $args = new stdClass();
        $args->result_srl = $result_srl;
        $output = executeQuery('mbti.getResult', $args);
        $data = $output->data;
        if($data) {
            $data->mbti_subtype = $this->calculateSubtype($data);
        }
        return $data;
    }

    /**
     * @brief Get Module Config
     */
    public function getConfig()
    {
        $oModuleModel = getModel('module');
        $config = $oModuleModel->getModuleConfig('mbti');
        
        if(!$config) {
            $config = new stdClass();
            $config->point_cost = 500;
            $config->show_stats = 'Y';
        }

        return $config;
    }

    /**
     * @brief Get Member's Latest Result
     */
    public function getMemberLatestResult($member_srl)
    {
        $args = new stdClass();
        $args->member_srl = $member_srl;
        $args->list_count = 1;

        $output = executeQuery('mbti.getMemberLatestResult', $args);
        
        if(!$output->toBool() || !$output->data) {
            return null;
        }

        $data = is_array($output->data) ? $output->data[0] : $output->data;
        if($data) {
            $data->mbti_subtype = $this->calculateSubtype($data);
        }
        return $data;
    }

    /**
     * @brief Get Community Stats
     */
    public function getCommunityStats()
    {
        $output = executeQuery('mbti.getMbtiStats');
        
        if(!$output->toBool() || !$output->data) {
            return [];
        }

        $stats = [];
        $data = is_array($output->data) ? $output->data : [$output->data];
        
        $total = 0;
        foreach($data as $row) {
            $total += (int)$row->count;
        }

        foreach($data as $row) {
            $row->percent = $total > 0 ? round(($row->count / $total) * 100, 1) : 0;
            $stats[] = $row;
        }

        return $stats;
    }

    /**
     * @brief Check if user belongs to allowed groups
     */
    public function isAllowedGroup($config, $logged_info)
    {
        if(empty($config->allowed_groups)) {
            return true;
        }
        
        if(!$logged_info) {
            return false;
        }

        $user_groups = (array)$logged_info->group_list;
        foreach($config->allowed_groups as $group_srl) {
            if(isset($user_groups[$group_srl])) {
                return true;
            }
        }
        
        return false;
    }

    /**
     * @brief Calculate lower/uppercase subtype based on score strengths
     */
    public function calculateSubtype($result)
    {
        if(!isset($result->score_e) || ($result->score_e == 0 && $result->score_i == 0)) {
            return $result->mbti_type;
        }

        $subtype = '';
        
        // E vs I (Threshold 11 for uppercase, 8~10 for lowercase)
        if($result->score_e >= $result->score_i) {
            $subtype .= ($result->score_e >= 11) ? 'E' : 'e';
        } else {
            $subtype .= ($result->score_i >= 11) ? 'I' : 'i';
        }

        // S vs N
        if($result->score_s >= $result->score_n) {
            $subtype .= ($result->score_s >= 11) ? 'S' : 's';
        } else {
            $subtype .= ($result->score_n >= 11) ? 'N' : 'n';
        }

        // T vs F
        if($result->score_t >= $result->score_f) {
            $subtype .= ($result->score_t >= 11) ? 'T' : 't';
        } else {
            $subtype .= ($result->score_f >= 11) ? 'F' : 'f';
        }

        // J vs P
        if($result->score_j >= $result->score_p) {
            $subtype .= ($result->score_j >= 11) ? 'J' : 'j';
        } else {
            $subtype .= ($result->score_p >= 11) ? 'P' : 'p';
        }

        return $subtype;
    }
}
