<?php
/**
 * @class  mbtiModel
 * @author 
 * @brief  mbti module model class
 */
class mbtiModel extends mbti
{
    /**
     * @brief Initialization
     */
    public function init()
    {
    }

    /**
     * @brief Return the official 40-question MBTI set
     */
    public function getQuestions()
    {
        // Total 40 questions (10 per dichotomy) to ensure high reliability.
        // Option A and Option B map to specific traits.
        return [
            // E vs I (Extroversion vs Introversion)
            ['id' => 'ei_1', 'type' => 'EI', 'q' => '주말에 시간이 주어졌을 때, 당신은 보통 어떻게 보내는 것을 선호하나요?', 'a' => ['text' => '친구들이나 지인들과 만나 활기차게 어울리며 에너지를 얻는다.', 'value' => 'E'], 'b' => ['text' => '집에서 혼자 책을 읽거나 취미 생활을 하며 차분히 에너지를 충전한다.', 'value' => 'I']],
            ['id' => 'ei_2', 'type' => 'EI', 'q' => '새로운 사람들이 많은 모임에 참석했을 때 당신의 모습은?', 'a' => ['text' => '먼저 다가가 대화를 주도하고 새로운 인연을 만드는 것을 즐긴다.', 'value' => 'E'], 'b' => ['text' => '아는 사람과 주로 대화하며, 누군가 다가오기를 기다리는 편이다.', 'value' => 'I']],
            ['id' => 'ei_3', 'type' => 'EI', 'q' => '스트레스를 받았을 때, 이를 해소하는 방식은 무엇인가요?', 'a' => ['text' => '사람들과 대화하고 고민을 나누며 기분을 전환한다.', 'value' => 'E'], 'b' => ['text' => '혼자만의 시간을 가지며 생각 정리를 하고 휴식을 취한다.', 'value' => 'I']],
            ['id' => 'ei_4', 'type' => 'EI', 'q' => '업무 환경에서 선호하는 소통 방식은?', 'a' => ['text' => '직접 말로 대화하며 빠르게 의견을 주고받는 것을 선호한다.', 'value' => 'E'], 'b' => ['text' => '메시지나 이메일 등을 통해 생각을 정리한 후 전달하는 것을 선호한다.', 'value' => 'I']],
            ['id' => 'ei_5', 'type' => 'EI', 'q' => '대화를 나눌 때, 당신은 주로 어떤 역할을 하나요?', 'a' => ['text' => '적극적으로 말을 하며 대화의 흐름을 이끌어가는 편이다.', 'value' => 'E'], 'b' => ['text' => '상대방의 말을 경청하고, 필요할 때 내 의견을 덧붙이는 편이다.', 'value' => 'I']],
            ['id' => 'ei_6', 'type' => 'EI', 'q' => '전화가 왔을 때 당신의 반응은?', 'a' => ['text' => '아무렇지 않게 바로 받아서 자유롭게 대화한다.', 'value' => 'E'], 'b' => ['text' => '누구인지 확인하고 마음의 준비를 약간 한 후 받거나, 문자가 편하다.', 'value' => 'I']],
            ['id' => 'ei_7', 'type' => 'EI', 'q' => '어떤 아이디어가 떠올랐을 때, 어떻게 발전시키나요?', 'a' => ['text' => '일단 입 밖으로 꺼내서 다른 사람들과 이야기하며 구체화한다.', 'value' => 'E'], 'b' => ['text' => '머릿속으로 충분히 생각하고 정리가 된 후에야 타인에게 말한다.', 'value' => 'I']],
            ['id' => 'ei_8', 'type' => 'EI', 'q' => '외출이나 여행 후 돌아왔을 때의 기분은?', 'a' => ['text' => '재밌었다며 만족감을 느끼고, 또 언제 나갈지 기대한다.', 'value' => 'E'], 'b' => ['text' => '즐거웠지만 기가 빠진 느낌이라 당분간은 집에만 있고 싶다.', 'value' => 'I']],
            ['id' => 'ei_9', 'type' => 'EI', 'q' => '자신의 생각이나 감정을 겉으로 표현하는 데 있어 당신은?', 'a' => ['text' => '비교적 솔직하고 즉각적으로, 표정이나 말로 잘 드러내는 편이다.', 'value' => 'E'], 'b' => ['text' => '쉽게 드러내지 않고 내면에 간직하거나 신중하게 표출하는 편이다.', 'value' => 'I']],
            ['id' => 'ei_10', 'type' => 'EI', 'q' => '주위 사람들에게 당신은 보통 어떻게 평가되나요?', 'a' => ['text' => '활동적이고 사교성이 좋고 말이 많다고 평가받는다.', 'value' => 'E'], 'b' => ['text' => '조용하고 차분하며 신중하고 생각이 깊다고 평가받는다.', 'value' => 'I']],

            // S vs N (Sensing vs Intuition)
            ['id' => 'sn_1', 'type' => 'SN', 'q' => '어떤 사물이나 현상을 묘사할 때, 당신은 주로 어떻게 표현하나요?', 'a' => ['text' => '눈에 보이는 구체적인 사실, 크기, 색깔, 형태 등을 있는 그대로 묘사한다.', 'value' => 'S'], 'b' => ['text' => '그것이 주는 느낌, 상징성, 비유적 의미나 나의 상상을 바탕으로 묘사한다.', 'value' => 'N']],
            ['id' => 'sn_2', 'type' => 'SN', 'q' => '새로운 전자기기나 제품을 샀을 때, 당신의 행동은?', 'a' => ['text' => '설명서를 꼼꼼히 읽어보고, 정해진 순서대로 차근차근 조작해본다.', 'value' => 'S'], 'b' => ['text' => '설명서보다는 직감적으로 이것저것 눌러보며 전체적인 기능을 파악하려 한다.', 'value' => 'N']],
            ['id' => 'sn_3', 'type' => 'SN', 'q' => '요리를 할 때 당신의 스타일은?', 'a' => ['text' => '레시피에 적힌 재료의 양과 조리 시간을 정확하게 지켜서 만든다.', 'value' => 'S'], 'b' => ['text' => '눈대중과 감으로 나만의 방식이나 새로운 재료 조합을 시도해본다.', 'value' => 'N']],
            ['id' => 'sn_4', 'type' => 'SN', 'q' => '대화 중 어떤 주제에 더 흥미를 느끼나요?', 'a' => ['text' => '일상 생활, 현실적인 경험, 구체적인 사실이나 뉴스에 대한 이야기.', 'value' => 'S'], 'b' => ['text' => '철학적인 질문, 추상적인 개념, 미래의 가능성이나 상상력이 필요한 이론.', 'value' => 'N']],
            ['id' => 'sn_5', 'type' => 'SN', 'q' => '길을 찾을 때 당신이 의존하는 방식은?', 'a' => ['text' => '특정 랜드마크, 간판, 지도상의 명확한 경로와 방향(동서남북)을 기억한다.', 'value' => 'S'], 'b' => ['text' => '전체적인 방향 감각이나 "대충 이쪽으로 가면 나왔던 것 같아"라는 직감에 의존한다.', 'value' => 'N']],
            ['id' => 'sn_6', 'type' => 'SN', 'q' => '과거의 기억을 떠올릴 때 주로 어떻게 기억하나요?', 'a' => ['text' => '그 당시의 날씨, 옷차림, 정확한 대화 내용 등 세부적인 디테일이 생생하다.', 'value' => 'S'], 'b' => ['text' => '그 당시의 전반적인 분위기나 내 감정, 상황의 의미가 주로 떠오른다.', 'value' => 'N']],
            ['id' => 'sn_7', 'type' => 'SN', 'q' => '영화를 보거나 소설을 읽을 때 당신의 초점은?', 'a' => ['text' => '스토리의 논리적 흐름, 현실성, 생생한 상황 묘사에 몰입한다.', 'value' => 'S'], 'b' => ['text' => '작품이 주는 숨겨진 메시지나 주인공의 심리적 변화, 이면의 의미를 찾는다.', 'value' => 'N']],
            ['id' => 'sn_8', 'type' => 'SN', 'q' => '문제를 해결할 때 선호하는 방식은?', 'a' => ['text' => '기존의 검증된 방법과 과거의 경험을 바탕으로 안전하게 해결한다.', 'value' => 'S'], 'b' => ['text' => '남들이 하지 않았던 새롭고 창의적이고 발전적인 아이디어를 떠올려 시도한다.', 'value' => 'N']],
            ['id' => 'sn_9', 'type' => 'SN', 'q' => '숲과 나무 중, 당신의 시야는 어디에 맞춰져 있나요?', 'a' => ['text' => '개별적인 나무들의 종류와 상태 등 구체적인 부분을 먼저 자세히 본다.', 'value' => 'S'], 'b' => ['text' => '숲 전체가 어우러진 풍경과 전체적인 조화, 큰 그림을 먼저 인식한다.', 'value' => 'N']],
            ['id' => 'sn_10', 'type' => 'SN', 'q' => '"현재"와 "미래" 중 당신에게 더 중요한 것은?', 'a' => ['text' => '지금 당장 눈앞에 놓인 현실의 삶과 현재의 즐거움, 실속이 중요하다.', 'value' => 'S'], 'b' => ['text' => '앞으로 일어날 변화와 미래의 잠재력, 비전과 의미가 더 중요하다.', 'value' => 'N']],

            // T vs F (Thinking vs Feeling)
            ['id' => 'tf_1', 'type' => 'TF', 'q' => '친구가 "나 요새 좀 우울해서 머리 잘랐어"라고 말했을 때, 당신의 반응은?', 'a' => ['text' => '"단발로 잘랐어? 아니면 파마? 왜 우울해, 무슨 일 있어?" (원인 분석 및 사실 확인)', 'value' => 'T'], 'b' => ['text' => '"많이 우울했구나 ㅠㅠ 머리 자르니까 기분 전환 좀 됐어?" (공감 및 감정 지지)', 'value' => 'F']],
            ['id' => 'tf_2', 'type' => 'TF', 'q' => '팀 프로젝트를 진행하던 중, 한 팀원이 계속해서 실수를 합니다. 어떻게 대처할 것인가요?', 'a' => ['text' => '실수 원인을 짚어주고 업무를 재조정하여 효율성과 목표 달성을 최우선으로 한다.', 'value' => 'T'], 'b' => ['text' => '그 팀원이 어떤 어려움이 있는지 물어보고 도와주며, 팀의 화합을 중요시한다.', 'value' => 'F']],
            ['id' => 'tf_3', 'type' => 'TF', 'q' => '선택의 기로에서 결정을 내릴 때, 당신의 주된 기준은?', 'a' => ['text' => '논리적 인과관계, 객관적인 데이터, 장단점 분석 등 합리성을 바탕으로 판단한다.', 'value' => 'T'], 'b' => ['text' => '나의 가치관, 사람들과의 관계, 이 결정이 미칠 감정적인 영향과 조화를 고려한다.', 'value' => 'F']],
            ['id' => 'tf_4', 'type' => 'TF', 'q' => '논쟁이 발생했을 때, 당신의 태도는?', 'a' => ['text' => '객관적인 사실과 명확한 옳고 그름을 가리며 끝까지 논리적으로 설명하려 한다.', 'value' => 'T'], 'b' => ['text' => '상대방의 기분이 상하지 않는 선에서 타협점을 찾거나, 상황을 유연하게 넘기려 한다.', 'value' => 'F']],
            ['id' => 'tf_5', 'type' => 'TF', 'q' => '타인을 칭찬할 때, 어떻게 표현하는 것이 편한가요?', 'a' => ['text' => '"이 부분은 이런 이유로 아주 잘했네. 효과적이야." 하며 구체적인 성과나 능력을 칭찬한다.', 'value' => 'T'], 'b' => ['text' => '"네가 도와줘서 정말 고마워! 너는 정말 따뜻한 사람이야." 하며 사람 자체의 성향이나 기여를 칭찬한다.', 'value' => 'F']],
            ['id' => 'tf_6', 'type' => 'TF', 'q' => '친구가 심각한 고민을 털어놓았을 때, 당신이 제공하는 것은?', 'a' => ['text' => '문제를 해결할 수 있는 실질적인 조언이나 현실적인 분석을 해준다.', 'value' => 'T'], 'b' => ['text' => '진심 어린 위로와 리액션을 통해 마음의 안정을 찾을 수 있도록 돕는다.', 'value' => 'F']],
            ['id' => 'tf_7', 'type' => 'TF', 'q' => '일에서 가장 뿌듯함을 느낄 때는 언제인가요?', 'a' => ['text' => '복잡한 문제를 지명도 있게 논리적으로 해결해 냈을 때, 목표를 효율적으로 달성했을 때.', 'value' => 'T'], 'b' => ['text' => '나의 일이 타인에게 가치 있는 도움을 주었고 긍정적인 평가와 감사를 받았을 때.', 'value' => 'F']],
            ['id' => 'tf_8', 'type' => 'TF', 'q' => '부당한 상황에 처했을 때 당신의 대응은?', 'a' => ['text' => '어떤 규정이나 논리에 어긋나는지를 명확하게 따져 묻는다.', 'value' => 'T'], 'b' => ['text' => '나와 다른 사람들에게 상처가 되었다는 사실에 주로 분노하거나 실망한다.', 'value' => 'F']],
            ['id' => 'tf_9', 'type' => 'TF', 'q' => '누군가에게 조언을 구했는데, 다소 직설적이고 차가운 팩트 폭력을 들었다면?', 'a' => ['text' => '기분은 조금 나빠도, 객관적으로 맞는 말이므로 수용하고 개선하려 한다.', 'value' => 'T'], 'b' => ['text' => '아무리 맞는 말이어도 전달 방식이 무례하다고 느끼며 마음에 큰 상처를 받는다.', 'value' => 'F']],
            ['id' => 'tf_10', 'type' => 'TF', 'q' => '"원칙"과 "예외"에 상황에 대한 당신의 생각은?', 'a' => ['text' => '원칙은 지켜져야 하므로 일관되고 공정하게 적용해야 한다.', 'value' => 'T'], 'b' => ['text' => '상황에 따라 개인적인 사정을 고려하여 융통성 있게 예외를 둘 수 있어야 한다.', 'value' => 'F']],

            // J vs P (Judging vs Perceiving)
            ['id' => 'jp_1', 'type' => 'JP', 'q' => '여행을 떠나기 전, 당신의 준비 방식은?', 'a' => ['text' => '날짜별 일정, 예산, 숙소, 이동 수단 등 세부 계획을 엑셀로 짜둔다.', 'value' => 'J'], 'b' => ['text' => '가고 싶은 큼직한 몇 곳만 정해두고, 구체적인 일정은 현지 기분에 따라 결정한다.', 'value' => 'P']],
            ['id' => 'jp_2', 'type' => 'JP', 'q' => '일을 처리할 때 선호하는 방식은?', 'a' => ['text' => '마감일 이전에 미리미리 체계적으로 시작하여 끝내놓고 마음 편히 쉰다.', 'value' => 'J'], 'b' => ['text' => '마감일에 임박했을 때 폭발적인 에너지를 내며 유연하게 대처하여 처리한다.', 'value' => 'P']],
            ['id' => 'jp_3', 'type' => 'JP', 'q' => '갑작스럽게 약속이나 일정이 변경되었다면?', 'a' => ['text' => '미리 세워둔 계획과 틀어지게 되어 당황스럽고 다소 스트레스를 받는다.', 'value' => 'J'], 'b' => ['text' => '그럴 수 있다고 생각하며, 오히려 생긴 여유 시간에 다른 일을 즉흥적으로 찾는다.', 'value' => 'P']],
            ['id' => 'jp_4', 'type' => 'JP', 'q' => '당신의 책상이나 컴퓨터 바탕화면의 상태는 주로 어떤가요?', 'a' => ['text' => '항상 물건이 제자리에 있도록 깔끔하게 정리정돈 및 폴더화 분류가 되어 있다.', 'value' => 'J'], 'b' => ['text' => '다소 무질서해 보이지만, 본인은 어디에 무엇이 있는지 아는 "나만의 규칙"이 있다.', 'value' => 'P']],
            ['id' => 'jp_5', 'type' => 'JP', 'q' => '모임 메뉴를 정할 때 당신은?', 'a' => ['text' => '만나기 전에 메뉴와 식당 예약을 확실하게 정해두는 것을 좋아한다.', 'value' => 'J'], 'b' => ['text' => '"일단 만나서 다 같이 정하자~"라며 가능성을 열어둔다.', 'value' => 'P']],
            ['id' => 'jp_6', 'type' => 'JP', 'q' => '하루의 일과 중, 주말 계획은 어떻게 세우나요?', 'a' => ['text' => '"토 오전 10시 운동, 오후 2시 약속, 6시 귀가"처럼 구체적으로 정해져 있어야 안심이 된다.', 'value' => 'J'], 'b' => ['text' => '일어나서 기분 내키는 대로 즉흥적으로 하고 싶은 활동을 찾아서 한다.', 'value' => 'P']],
            ['id' => 'jp_7', 'type' => 'JP', 'q' => '목표를 달성해 나가는 과정에서 중요하게 생각하는 것은?', 'a' => ['text' => '목표로 향하는 체계적인 과정과 완수를 최우선으로, 변동 없이 꾸준히 나아가는 것.', 'value' => 'J'], 'b' => ['text' => '유연성을 발휘하여, 도중에 흥미로운 다른 방향이나 더 나은 방법이 생기면 언제든 바꾸는 것.', 'value' => 'P']],
            ['id' => 'jp_8', 'type' => 'JP', 'q' => '마트에서 쇼핑을 할 때 당신의 모습은?', 'a' => ['text' => '미리 작성해 둔 쇼핑 리스트를 보며 필요한 물품만 빠르게 구매한다.', 'value' => 'J'], 'b' => ['text' => '구경하면서 눈에 들어오거나 세일하는 충동 구매 아이템을 많이 고른다.', 'value' => 'P']],
            ['id' => 'jp_9', 'type' => 'JP', 'q' => '결정에 앞서 정보를 수집할 때, 언제 결정을 내리나요?', 'a' => ['text' => '필요한 만큼의 적당한 정보가 모이면 더 고민하지 않고 빠르게 확정 짓는다.', 'value' => 'J'], 'b' => ['text' => '계속해서 새로운 정보를 탐색하며 결정을 최대한 마지막까지 미루려 한다.', 'value' => 'P']],
            ['id' => 'jp_10', 'type' => 'JP', 'q' => '"끝맺음"에 대한 당신의 자세는?', 'a' => ['text' => '시작한 일은 반드시 결론을 내고 깔끔하게 마무리해야 다음 일로 넘어갈 수 있다.', 'value' => 'J'], 'b' => ['text' => '동시에 여러 가지 일을 벌여 놓는 편이며, 중간에 흐지부지 끝나는 경우도 있다.', 'value' => 'P']]
        ];
    }

    /**
     * @brief Get MBTI Result info
     */
    public function getResult($result_srl)
    {
        $args = new stdClass();
        $args->result_srl = $result_srl;
        $output = executeQuery('mbti.getResult', $args);
        return $output->data;
    }

    /**
     * @brief Get Module Config
     */
    public function getConfig()
    {
        $oModuleModel = getModel('module');
        $config = $oModuleModel->getModuleConfig('mbti');
        
        if(!$config) $config = new stdClass();
        if(!isset($config->point_cost)) $config->point_cost = 500; // default 500 point cost
        
        return $config;
    }
}
